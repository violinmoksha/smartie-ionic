<!--
  Generated template for the ChatRoomsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="{{userRole}}">
    <ion-toolbar>
      <ion-title>Messages</ion-title>
    </ion-toolbar>
  </ion-header>


<ion-content>
<div class="text-center">
  <div *ngIf="chatLoader; else chatLoaded" class="text-center">
    <h4>Loading chats...</h4>
  </div>
  <ng-template #chatLoaded>
      <ion-list>
          <div *ngIf="chats.length == 0" class="text-center">
            <h4>No chats available.</h4>
          </div>
          <div *ngIf="chats.length > 0">
              <ion-item *ngFor="let chat of chats" (click)="openChat(chat)">
                  <ion-avatar item-start>
                      <img [src]="chat.receiver.profilePhoto" />
                    </ion-avatar>
                    <h2 class="chat-title">{{chat.receiver.fullname}}</h2>
                    <p class="last-message" *ngIf="chat.messages.length > 0">{{chat.messages[0].message}}</p>
              </ion-item>
          </div>
        </ion-list>
  </ng-template>
</div>
</ion-content>
