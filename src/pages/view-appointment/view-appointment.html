<!--
  Generated template for the ViewAppointmentPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header [ngClass]="role">

  <ion-navbar>
    <ion-title>Appointments</ion-title>
  </ion-navbar>

  <ion-toolbar no-border-top>
    <ion-segment [(ngModel)]="scheduleStatus">
      <ion-segment-button value="ongoing">
        Ongoing
      </ion-segment-button>
      <ion-segment-button value="upcoming">
        Upcoming
      </ion-segment-button>
      <ion-segment-button value="completed">
        Completed
      </ion-segment-button>
    </ion-segment>
</ion-toolbar>

</ion-header>


<ion-content [ngClass]="role">

  <div class="appointment-wrap">
    <div [ngSwitch]="scheduleStatus">
      <div *ngSwitchCase="'ongoing'">
        <div class="appointment-content" *ngFor="let schedule of ongoingSchedules">
          <div *ngIf="schedule.scheduleStatus == 'ongoing'">
            <ion-item  class="color-appt">
              <ion-avatar *ngIf="profileData.profilePhoto" item-start>
                <img [src]="profileData.profilePhoto">
              </ion-avatar>
              <h3>{{ schedule?.owner}}</h3>
            </ion-item>
            <div *ngFor="let appointment of schedule.appointmentTimings">
              <div class="appointment-date">
               <p>
                  <span style="margin-right: 10px;"><ion-icon ios="ios-calendar" md="md-calendar" style="margin:5px;"></ion-icon>{{ appointment.startDate }}</span>
                  <span style="margin-right: 10px;"><ion-icon ios="ios-alarm" md="md-alarm" style="margin:5px;"></ion-icon> {{ appointment.startTime }}</span>  <span style="margin-right: 10px;"><ion-icon ios="ios-arrow-round-forward" md="md-arrow-round-forward" style="margin:5px;"></ion-icon> {{ appointment.endTime }}</span>
               </p>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="ongoingSchedules?.length == 0 && !isFetching" class="text-center">
          <p>No ongoing appointments for you!</p>
        </div>
      </div>

      <div *ngSwitchCase="'upcoming'">
        <div class="appointment-content" *ngFor="let schedule of upcomingSchedules">
          <div *ngIf="schedule.scheduleStatus == 'upcoming'">
            <ion-item  class="color-appt">
              <ion-avatar *ngIf="profileData.profilePhoto" item-start>
                <img [src]="profileData.profilePhoto">
              </ion-avatar>
              <h3>{{ schedule?.owner}}</h3>
            </ion-item>
            <div *ngFor="let appointment of schedule.appointmentTimings">
              <div class="appointment-date">
               <p>
                  <span style="margin-right: 10px;"><ion-icon ios="ios-calendar" md="md-calendar" style="margin:5px;"></ion-icon>{{ appointment.startDate }}</span>
                  <span style="margin-right: 10px;"><ion-icon ios="ios-alarm" md="md-alarm" style="margin:5px;"></ion-icon> {{ appointment.startTime }}</span>  <span style="margin-right: 10px;"><ion-icon ios="ios-arrow-round-forward" md="md-arrow-round-forward" style="margin:5px;"></ion-icon> {{ appointment.endTime }}</span>

               </p>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="upcomingSchedules?.length == 0 && !isFetching" class="text-center">
          <p>No upcoming appointments for you!</p>
        </div>
      </div>

      <div *ngSwitchCase="'completed'">
        <div class="appointment-content" *ngFor="let schedule of completedSchedules">
          <div *ngIf="schedule.scheduleStatus == 'completed'">
            <!-- <div class="appointment-container"> -->
              <ion-item  class="color-appt">
    <ion-avatar *ngIf="profileData.profilePhoto" item-start>
      <img [src]="profileData.profilePhoto">
    </ion-avatar>
    <h3>{{ schedule?.owner}}</h3>
    <button item-end class="button button-review" [disabled]="schedule.jobRequestId.reviewStatus" (click)="reviewProfile(schedule)" ion-button primary>Review</button>
  </ion-item>

            <!-- </div> -->
            <div *ngFor="let appointment of schedule.appointmentTimings">
              <div class="appointment-date">
               <p>
                  <span style="margin-right: 10px;"><ion-icon ios="ios-calendar" md="md-calendar" style="margin:5px;"></ion-icon>{{ appointment.startDate }}</span>
                  <span style="margin-right: 10px;"><ion-icon ios="ios-alarm" md="md-alarm" style="margin:5px;"></ion-icon> {{ appointment.startTime }}</span>  <span style="margin-right: 10px;"><ion-icon ios="ios-arrow-round-forward" md="md-arrow-round-forward" style="margin:5px;"></ion-icon> {{ appointment.endTime }}</span>
               </p>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="completedSchedules?.length == 0 && !isFetching" class="text-center">
          <p>No completed appointments for you!</p>
        </div>
      </div>

    </div>

  </div>
</ion-content>
